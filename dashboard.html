<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SYLLA ‚Äì Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{min-height:100%;font-family:'Nunito',sans-serif;background:#F0F4FF;color:#1A1F3C;overflow-x:hidden}
:root{
  --bg:#F0F4FF;
  --white:#FFFFFF;
  --blue:#1B3FA0;
  --blue-m:#2952C8;
  --blue-l:#EEF2FF;
  --blue-mid:#4A6FD4;
  --red:#D42B2B;
  --red-l:#FFF0F0;
  --orange:#F47B20;
  --orange-l:#FFF4EB;
  --orange-d:#C85F00;
  --ink:#1A1F3C;
  --ink2:#3A4168;
  --ink3:#7B82A8;
  --line:#DDE3F5;
  --white-card:#FFFFFF;
  --sh:0 2px 14px rgba(27,63,160,.10);
  --sh-lg:0 8px 36px rgba(27,63,160,.16);
  --r:18px;
}
body{background:var(--bg)}
.shell{max-width:430px;margin:0 auto;min-height:100vh;position:relative;padding-bottom:96px}

/* ‚îÄ‚îÄ TOPBAR ‚îÄ‚îÄ */
.topbar{
  display:flex;align-items:center;justify-content:space-between;
  padding:22px 20px 0;
}
.logo-row{display:flex;align-items:center;gap:10px}
.logo-gem{
  width:38px;height:38px;border-radius:11px;
  background:linear-gradient(135deg,var(--blue-m),var(--blue));
  display:flex;align-items:center;justify-content:center;
  font-size:20px;font-weight:900;color:#fff;
  box-shadow:0 4px 14px rgba(41,82,200,.35);
}
.logo-text{
  font-size:22px;font-weight:900;letter-spacing:3px;
  background:linear-gradient(135deg,var(--blue),var(--blue-m));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}

.burger-btn{
  width:42px;height:42px;border-radius:13px;
  background:var(--white);border:none;cursor:pointer;
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:5px;
  box-shadow:var(--sh);transition:transform .2s;
}
.burger-btn:hover{transform:scale(1.06)}
.bl{width:20px;height:2.5px;border-radius:2px;background:var(--blue);transition:all .32s cubic-bezier(.4,0,.2,1)}
.burger-btn.open .bl:nth-child(1){transform:translateY(7.5px) rotate(45deg)}
.burger-btn.open .bl:nth-child(2){opacity:0;transform:scaleX(0)}
.burger-btn.open .bl:nth-child(3){transform:translateY(-7.5px) rotate(-45deg)}

/* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
.sb-overlay{position:fixed;inset:0;z-index:190;background:rgba(26,31,60,.4);opacity:0;pointer-events:none;transition:opacity .3s;backdrop-filter:blur(5px)}
.sb-overlay.open{opacity:1;pointer-events:all}
.sidebar{
  position:fixed;top:0;right:-300px;width:280px;height:100vh;
  background:var(--white);z-index:200;
  box-shadow:-10px 0 48px rgba(27,63,160,.15);
  transition:right .34s cubic-bezier(.4,0,.2,1);
  padding:54px 22px 36px;
  display:flex;flex-direction:column;gap:5px;
  border-radius:22px 0 0 22px;
}
.sidebar.open{right:0}
.sb-user{
  display:flex;align-items:center;gap:12px;
  padding:14px 16px;border-radius:16px;
  background:var(--blue-l);margin-bottom:14px;
}
.sb-av{
  width:44px;height:44px;border-radius:50%;
  background:linear-gradient(135deg,var(--orange),var(--red));
  display:flex;align-items:center;justify-content:center;
  font-size:19px;font-weight:800;color:#fff;flex-shrink:0;
}
.sb-info-name{font-size:14px;font-weight:800;color:var(--ink)}
.sb-info-rank{font-size:11px;color:var(--blue-m);font-weight:700}
.menu-item{
  display:flex;align-items:center;gap:12px;
  padding:13px 14px;border-radius:14px;cursor:pointer;
  transition:background .2s,transform .15s;
  text-decoration:none;color:var(--ink2);
  font-weight:600;font-size:14px;
  border:none;background:transparent;width:100%;text-align:left;
}
.menu-item:hover{background:var(--blue-l);transform:translateX(4px)}
.menu-item.danger{color:var(--red)}
.menu-item.danger:hover{background:var(--red-l)}
.mi-ico{
  width:36px;height:36px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;flex-shrink:0;
}
.mi-p .mi-ico{background:var(--blue-l);color:var(--blue-m)}
.mi-h .mi-ico{background:var(--orange-l);color:var(--orange-d)}
.mi-r .mi-ico{background:#FFF0F0;color:var(--red)}
.mi-s .mi-ico{background:#F0FFF4;color:#2E7D32}
.mi-l .mi-ico{background:var(--red-l);color:var(--red)}
.sb-sep{height:1px;background:var(--line);margin:6px 0}

/* ‚îÄ‚îÄ GREETING CARD ‚îÄ‚îÄ */
.gc{
  margin:18px 20px 0;
  border-radius:24px;
  background:linear-gradient(135deg,var(--blue) 0%,var(--blue-m) 55%,#1A2E80 100%);
  padding:24px 22px 20px;
  position:relative;overflow:hidden;
  box-shadow:0 12px 48px rgba(27,63,160,.28);
  animation:fadeUp .5s ease both;
}
.gc-glow1{position:absolute;top:-50px;right:-50px;width:200px;height:200px;border-radius:50%;background:radial-gradient(circle,rgba(244,123,32,.22),transparent);pointer-events:none}
.gc-glow2{position:absolute;bottom:-60px;left:-40px;width:180px;height:180px;border-radius:50%;background:radial-gradient(circle,rgba(212,43,43,.15),transparent);pointer-events:none}
.gc-stripe{position:absolute;top:0;right:0;width:6px;height:100%;background:linear-gradient(180deg,var(--orange),var(--red));border-radius:0 24px 24px 0}

.gc-row1{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.gc-av{
  width:50px;height:50px;border-radius:50%;
  background:linear-gradient(135deg,var(--orange),var(--red));
  display:flex;align-items:center;justify-content:center;
  font-size:22px;font-weight:800;color:#fff;
  border:2.5px solid rgba(255,255,255,.3);
  box-shadow:0 4px 18px rgba(244,123,32,.4);
  cursor:pointer;flex-shrink:0;
}
.gc-time{text-align:right}
.gc-clock{font-size:26px;font-weight:800;color:#fff;letter-spacing:1px;font-variant-numeric:tabular-nums;line-height:1}
.gc-date{font-size:10.5px;color:rgba(255,255,255,.45);margin-top:3px;text-transform:capitalize}

.gc-hello{font-size:12px;color:rgba(255,255,255,.55);font-weight:600;margin-bottom:2px;text-transform:uppercase;letter-spacing:1px}
.gc-name{font-size:26px;font-weight:900;color:#fff;margin-bottom:14px;line-height:1.15}
.gc-name span{color:var(--orange);font-style:italic}

.gc-pill{
  display:inline-flex;align-items:center;gap:8px;
  background:rgba(255,255,255,.12);backdrop-filter:blur(8px);
  border:1px solid rgba(255,255,255,.18);
  border-radius:100px;padding:9px 18px;
  font-size:13px;color:rgba(255,255,255,.92);font-weight:600;
  cursor:pointer;transition:background .2s;text-decoration:none;
}
.gc-pill:hover{background:rgba(255,255,255,.2)}
.gc-dot{width:7px;height:7px;border-radius:50%;background:var(--orange);animation:pulse 2s infinite;flex-shrink:0}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.7)}}

.gc-bal{
  display:flex;align-items:center;justify-content:space-between;
  margin-top:18px;padding-top:16px;
  border-top:1px solid rgba(255,255,255,.12);
}
.gc-bal-lbl{font-size:10px;color:rgba(255,255,255,.45);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:3px;font-weight:700}
.gc-bal-val{font-size:22px;font-weight:900;color:#fff;line-height:1}
.gc-bal-val small{font-size:12px;color:rgba(255,255,255,.4);font-weight:600;margin-left:3px}
.gc-gains{font-size:16px;font-weight:800;color:#6EF09A;text-align:right}

/* ‚îÄ‚îÄ SECTION HEAD ‚îÄ‚îÄ */
.sec-head{display:flex;align-items:center;justify-content:space-between;padding:22px 20px 10px}
.sec-title{font-size:11px;font-weight:800;color:var(--ink3);text-transform:uppercase;letter-spacing:2px}
.sec-more{font-size:12px;color:var(--blue-m);font-weight:700;text-decoration:none;cursor:pointer}

/* ‚îÄ‚îÄ ACTION CARDS (Plan / Recharge / Retrait) ‚îÄ‚îÄ */
.act-list{display:flex;flex-direction:column;gap:11px;padding:0 20px}
.act-card{
  display:flex;align-items:center;gap:14px;
  padding:16px 18px;border-radius:var(--r);
  background:var(--white);border:1.5px solid transparent;
  cursor:pointer;text-decoration:none;
  transition:transform .22s,box-shadow .22s;
  box-shadow:var(--sh);
  position:relative;overflow:hidden;
  animation:fadeUp .5s ease both;
}
.act-card:hover{transform:translateX(5px);box-shadow:var(--sh-lg)}
.act-card::before{content:'';position:absolute;left:0;top:0;bottom:0;width:4px;border-radius:4px 0 0 4px}
/* Plan */
.ac-plan{border-color:rgba(27,63,160,.15)}.ac-plan::before{background:linear-gradient(180deg,#5B8AFF,var(--blue))}
.ac-plan:hover{border-color:rgba(27,63,160,.3)}
/* Recharge */
.ac-rech{border-color:rgba(244,123,32,.18)}.ac-rech::before{background:linear-gradient(180deg,#FFB347,var(--orange))}
.ac-rech:hover{border-color:rgba(244,123,32,.35)}
/* Retrait */
.ac-retr{border-color:rgba(212,43,43,.18)}.ac-retr::before{background:linear-gradient(180deg,#FF6B6B,var(--red))}
.ac-retr:hover{border-color:rgba(212,43,43,.35)}

.act-card:nth-child(1){animation-delay:.08s}
.act-card:nth-child(2){animation-delay:.16s}
.act-card:nth-child(3){animation-delay:.24s}

.act-ico{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.ac-plan .act-ico{background:var(--blue-l)}
.ac-rech .act-ico{background:var(--orange-l)}
.ac-retr .act-ico{background:var(--red-l)}

.act-body{flex:1}
.act-title{font-size:15px;font-weight:800;color:var(--ink);margin-bottom:2px}
.act-sub{font-size:12px;color:var(--ink3);font-weight:500;line-height:1.4}

.act-right{text-align:right;flex-shrink:0}
.act-amt{font-size:16px;font-weight:800}
.ac-plan .act-amt{color:var(--blue-m)}
.ac-rech .act-amt{color:var(--orange-d)}
.ac-retr .act-amt{color:var(--red)}
.act-tag{font-size:9px;font-weight:800;padding:2px 8px;border-radius:100px;margin-top:3px;display:inline-block;letter-spacing:.6px}
.tag-blue{background:var(--blue-l);color:var(--blue)}
.tag-ora{background:var(--orange-l);color:var(--orange-d)}
.tag-red{background:var(--red-l);color:var(--red)}

.act-arr{width:26px;height:26px;border-radius:50%;background:var(--bg);display:flex;align-items:center;justify-content:center;color:var(--ink3);flex-shrink:0;transition:background .2s}
.act-card:hover .act-arr{background:var(--line)}

/* ‚îÄ‚îÄ TYPE CARDS (Rapide / Long terme / Actif) ‚îÄ‚îÄ */
.type-list{display:flex;flex-direction:column;gap:12px;padding:0 20px}
.type-card{
  border-radius:22px;padding:20px 20px 17px;
  text-decoration:none;display:block;
  transition:transform .22s,box-shadow .22s;
  box-shadow:var(--sh);position:relative;overflow:hidden;
  animation:fadeUp .5s ease both;
}
.type-card:hover{transform:translateY(-3px);box-shadow:0 14px 48px rgba(0,0,0,.18)}
/* Rapide ‚Äì orange/rouge */
.tc-rapide{background:linear-gradient(135deg,var(--orange) 0%,var(--red) 100%);animation-delay:.3s}
/* Long ‚Äì bleu */
.tc-long{background:linear-gradient(135deg,var(--blue) 0%,var(--blue-mid) 100%);animation-delay:.38s}
/* Actif ‚Äì bleu+orange */
.tc-actif{background:linear-gradient(135deg,#0F2A80 0%,var(--blue-m) 55%,var(--orange) 100%);animation-delay:.46s}

.tc-shine{position:absolute;top:-40%;right:-15%;width:240px;height:240px;border-radius:50%;background:rgba(255,255,255,.1);pointer-events:none}
.tc-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:11px}
.tc-ico{width:42px;height:42px;border-radius:13px;background:rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center}
.tc-badge{font-size:10px;font-weight:800;padding:4px 12px;border-radius:100px;background:rgba(255,255,255,.22);color:rgba(255,255,255,.95);letter-spacing:.7px}
.tc-title{font-size:22px;font-weight:900;color:#fff;margin-bottom:5px}
.tc-desc{font-size:12px;color:rgba(255,255,255,.78);line-height:1.55;font-weight:500}
.tc-footer{display:flex;align-items:center;justify-content:space-between;margin-top:15px;padding-top:13px;border-top:1px solid rgba(255,255,255,.18)}
.tc-ret{font-size:12px;font-weight:700;color:rgba(255,255,255,.85)}
.tc-ret strong{font-size:22px;font-weight:900;color:#fff;margin-right:3px}
.tc-arr{width:32px;height:32px;border-radius:50%;background:rgba(255,255,255,.22);display:flex;align-items:center;justify-content:center;color:#fff;transition:background .2s,transform .2s}
.type-card:hover .tc-arr{background:rgba(255,255,255,.38);transform:translate(3px,-3px)}

/* ‚îÄ‚îÄ TOP INVESTORS ‚îÄ‚îÄ */
.inv-scroll{display:flex;gap:12px;padding:4px 20px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
.inv-scroll::-webkit-scrollbar{display:none}
.inv-card{min-width:128px;background:var(--white);border-radius:16px;padding:15px 13px;text-align:center;box-shadow:var(--sh);border:1.5px solid var(--line);cursor:pointer;transition:transform .2s,box-shadow .2s;flex-shrink:0}
.inv-card:hover{transform:translateY(-4px);box-shadow:var(--sh-lg)}
.inv-av{width:40px;height:40px;border-radius:50%;margin:0 auto 8px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:800;color:#fff}
.av1{background:linear-gradient(135deg,#FFD700,#FFA000)}
.av2{background:linear-gradient(135deg,#B0BEC5,#607D8B)}
.av3{background:linear-gradient(135deg,#CD7F32,#8D5524)}
.avn{background:linear-gradient(135deg,var(--blue-m),var(--blue))}
.inv-name{font-size:12px;font-weight:800;color:var(--ink);margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.inv-gain{font-size:11px;font-weight:700;color:#2E7D32}
.inv-rnk{font-size:9.5px;color:var(--ink3);margin-top:3px;font-weight:600}

/* ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ */
.bot-nav{
  position:fixed;bottom:0;left:50%;transform:translateX(-50%);
  width:100%;max-width:430px;
  background:var(--white);
  border-top:1.5px solid var(--line);
  display:flex;justify-content:space-around;align-items:center;
  padding:10px 0 20px;z-index:90;
  box-shadow:0 -4px 20px rgba(27,63,160,.08);
}
.bn{display:flex;flex-direction:column;align-items:center;gap:3px;padding:6px 14px;border-radius:12px;cursor:pointer;border:none;background:transparent;color:var(--ink3);font-family:'Nunito',sans-serif;transition:background .2s}
.bn.active{color:var(--blue-m)}
.bn:hover{background:var(--blue-l)}
.bn-lbl{font-size:9.5px;font-weight:700;letter-spacing:.3px}
.bn-dot{width:4px;height:4px;border-radius:50%;background:var(--orange);display:none}
.bn.active .bn-dot{display:block}

/* ‚îÄ‚îÄ MODALS ‚îÄ‚îÄ */
.modal-bg{position:fixed;inset:0;z-index:300;background:rgba(26,31,60,.45);backdrop-filter:blur(6px);display:none;align-items:flex-end;justify-content:center}
.modal-bg.open{display:flex}
.modal{background:var(--white);border-radius:28px 28px 0 0;width:100%;max-width:430px;padding:26px 22px 40px;animation:slideUp2 .34s cubic-bezier(.34,1.2,.64,1);max-height:90vh;overflow-y:auto}
@keyframes slideUp2{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}
.modal-handle{width:40px;height:4px;border-radius:2px;background:var(--line);margin:0 auto 20px}
.modal-title{font-size:21px;font-weight:900;color:var(--ink);margin-bottom:4px}
.modal-sub{font-size:13px;color:var(--ink3);margin-bottom:20px;font-weight:500}
.m-grp{margin-bottom:14px}
.m-lbl{display:block;font-size:11px;font-weight:800;color:var(--ink3);margin-bottom:7px;text-transform:uppercase;letter-spacing:.9px}
.m-inp{width:100%;padding:13px 15px;background:var(--bg);border:2px solid var(--line);border-radius:14px;color:var(--ink);font-family:'Nunito',sans-serif;font-size:14px;font-weight:600;outline:none;transition:border-color .2s}
.m-inp:focus{border-color:var(--blue-m);box-shadow:0 0 0 3px rgba(41,82,200,.1)}
.m-sel{appearance:none;cursor:pointer}
.m-btn{width:100%;padding:15px;border:none;border-radius:16px;font-family:'Nunito',sans-serif;font-size:15px;font-weight:800;cursor:pointer;transition:all .24s;margin-top:8px}
.m-btn:hover{transform:translateY(-2px)}
.m-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
.m-btn-blue{background:linear-gradient(135deg,var(--blue-m),var(--blue));color:#fff;box-shadow:0 6px 20px rgba(41,82,200,.3)}
.m-btn-ora{background:linear-gradient(135deg,#FFB347,var(--orange));color:#fff;box-shadow:0 6px 20px rgba(244,123,32,.3)}
.m-btn-red{background:linear-gradient(135deg,#FF6B6B,var(--red));color:#fff;box-shadow:0 6px 20px rgba(212,43,43,.25)}

.plan-list{display:flex;flex-direction:column;gap:9px;margin-bottom:16px}
.plan-opt{padding:14px 16px;border-radius:14px;border:2px solid var(--line);background:var(--bg);cursor:pointer;transition:all .2s;display:flex;justify-content:space-between;align-items:center}
.plan-opt:hover,.plan-opt.sel{border-color:var(--blue-m);background:var(--blue-l)}
.po-name{font-size:14px;font-weight:800;color:var(--ink);margin-bottom:2px}
.po-detail{font-size:11px;color:var(--ink3);font-weight:600}
.po-ret{font-size:22px;font-weight:900;color:var(--blue-m)}

/* ‚îÄ‚îÄ REF BOX ‚îÄ‚îÄ */
.ref-box{background:linear-gradient(135deg,var(--blue-l),#E8EDFF);border-radius:16px;padding:22px;text-align:center;margin-bottom:18px;border:2px dashed rgba(41,82,200,.3)}
.ref-lbl{font-size:10px;font-weight:800;color:var(--blue-m);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px}
.ref-code{font-size:28px;font-weight:900;color:var(--ink);letter-spacing:4px}

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-100px);z-index:500;padding:12px 22px;border-radius:100px;font-size:13px;font-weight:700;white-space:nowrap;display:flex;align-items:center;gap:8px;box-shadow:0 8px 32px rgba(0,0,0,.2);transition:transform .38s cubic-bezier(.34,1.56,.64,1),opacity .38s;opacity:0;max-width:calc(100vw - 40px)}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}
.toast.success{background:linear-gradient(135deg,#2E7D32,#43A047);color:#fff}
.toast.error{background:linear-gradient(135deg,var(--red),#FF4444);color:#fff}
.toast.info{background:linear-gradient(135deg,var(--blue),var(--blue-m));color:#fff}

@keyframes fadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
.spin{width:15px;height:15px;border:2.5px solid rgba(255,255,255,.35);border-top-color:#fff;border-radius:50%;animation:sp .7s linear infinite;display:inline-block}
@keyframes sp{to{transform:rotate(360deg)}}
</style>
</head>
<body>

<!-- Overlay -->
<div class="sb-overlay" id="sb-overlay" onclick="closeSB()"></div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sb-user">
    <div class="sb-av" id="sb-av">?</div>
    <div>
      <div class="sb-info-name" id="sb-name">Chargement...</div>
      <div class="sb-info-rank" id="sb-rank">‚≠ê Bronze</div>
    </div>
  </div>
  <a class="menu-item mi-p" href="profil.html">
    <div class="mi-ico"><svg width="17" height="17" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
    Mon Profil
  </a>
  <a class="menu-item mi-h" href="historique.html">
    <div class="mi-ico"><svg width="17" height="17" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
    Historique
  </a>
  <a class="menu-item mi-r" href="parrainage.html">
    <div class="mi-ico"><svg width="17" height="17" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></div>
    Parrainage
  </a>
  <a class="menu-item mi-s" href="parametres.html">
    <div class="mi-ico"><svg width="17" height="17" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06A1.65 1.65 0 0 0 15 19.4a1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></div>
    Param√®tres
  </a>
  <div class="sb-sep"></div>
  <button class="menu-item mi-l danger" onclick="handleLogout()">
    <div class="mi-ico"><svg width="17" height="17" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg></div>
    D√©connexion
  </button>
</div>

<!-- SHELL -->
<div class="shell">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="logo-row">
      <div class="logo-gem">S</div>
      <div class="logo-text">SYLLA</div>
    </div>
    <button class="burger-btn" id="burger" onclick="toggleSB()">
      <div class="bl"></div><div class="bl"></div><div class="bl"></div>
    </button>
  </div>

  <!-- GREETING CARD -->
  <div class="gc">
    <div class="gc-glow1"></div><div class="gc-glow2"></div><div class="gc-stripe"></div>
    <div class="gc-row1">
      <div class="gc-av" id="gc-av" onclick="location.href='profil.html'">?</div>
      <div class="gc-time">
        <div class="gc-clock" id="gc-clock">--:--</div>
        <div class="gc-date" id="gc-date">--</div>
      </div>
    </div>
    <div class="gc-hello">Bonjour üëã</div>
    <div class="gc-name" id="gc-name">Bienvenue <span>Investisseur</span> !</div>
    <a class="gc-pill" href="plan.html">
      <div class="gc-dot"></div>
      Tu investis dans quoi aujourd'hui ?
      <svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
    </a>
    <div class="gc-bal">
      <div>
        <div class="gc-bal-lbl">Solde disponible</div>
        <div class="gc-bal-val" id="gc-balance">0 <small>FCFA</small></div>
      </div>
      <div>
        <div class="gc-bal-lbl" style="text-align:right">Gains totaux</div>
        <div class="gc-gains" id="gc-gains">+0 FCFA</div>
      </div>
    </div>
  </div>

  <!-- ACTIONS -->
  <div class="sec-head">
    <div class="sec-title">Actions rapides</div>
    <a href="historique.html" class="sec-more">Historique ‚Üí</a>
  </div>
  <div class="act-list">

    <a class="act-card ac-plan" href="plan.html">
      <div class="act-ico">
        <svg width="22" height="22" fill="none" stroke="#1B3FA0" stroke-width="2.2" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
      </div>
      <div class="act-body">
        <div class="act-title">Plan</div>
        <div class="act-sub">Choisissez votre plan d'investissement</div>
      </div>
      <div class="act-right">
        <div class="act-amt" id="card-plans">0</div>
        <div class="act-tag tag-blue">ACTIFS</div>
      </div>
      <div class="act-arr"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg></div>
    </a>

    <a class="act-card ac-rech" href="recharge.html">
      <div class="act-ico">
        <svg width="22" height="22" fill="none" stroke="#C85F00" stroke-width="2.2" viewBox="0 0 24 24"><path d="M12 5v14m-7-7h14"/></svg>
      </div>
      <div class="act-body">
        <div class="act-title">Recharge</div>
        <div class="act-sub">D√©posez des fonds sur votre compte</div>
      </div>
      <div class="act-right">
        <div class="act-amt" id="card-balance">0</div>
        <div class="act-tag tag-ora">FCFA</div>
      </div>
      <div class="act-arr"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg></div>
    </a>

    <a class="act-card ac-retr" href="retrait.html">
      <div class="act-ico">
        <svg width="22" height="22" fill="none" stroke="#D42B2B" stroke-width="2.2" viewBox="0 0 24 24"><path d="M12 19V5m7 7-7-7-7 7"/></svg>
      </div>
      <div class="act-body">
        <div class="act-title">Retrait</div>
        <div class="act-sub">Retirez vos gains et b√©n√©fices</div>
      </div>
      <div class="act-right">
        <div class="act-amt" id="card-gains">0</div>
        <div class="act-tag tag-red">FCFA</div>
      </div>
      <div class="act-arr"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg></div>
    </a>
  </div>

  <!-- STRAT√âGIES -->
  <div class="sec-head">
    <div class="sec-title">Strat√©gies</div>
  </div>
  <div class="type-list">

    <a class="type-card tc-rapide" href="rapide.html">
      <div class="tc-shine"></div>
      <div class="tc-top">
        <div class="tc-ico"><svg width="19" height="19" fill="none" stroke="#fff" stroke-width="2.5" viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
        <div class="tc-badge">‚ö° Court terme</div>
      </div>
      <div class="tc-title">Rapide</div>
      <div class="tc-desc">Gains express en 7 jours. Maximisez rapidement votre capital.</div>
      <div class="tc-footer">
        <div class="tc-ret"><strong>3%</strong>/ jour</div>
        <div class="tc-arr"><svg width="15" height="15" fill="none" stroke="#fff" stroke-width="2.5" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></div>
      </div>
    </a>

    <a class="type-card tc-long" href="long-terme.html">
      <div class="tc-shine"></div>
      <div class="tc-top">
        <div class="tc-ico"><svg width="19" height="19" fill="none" stroke="#fff" stroke-width="2.5" viewBox="0 0 24 24"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg></div>
        <div class="tc-badge">üìà Croissance</div>
      </div>
      <div class="tc-title">Long terme</div>
      <div class="tc-desc">Rendement stable sur 30 √† 60 jours. Jusqu'√† 240% de retour.</div>
      <div class="tc-footer">
        <div class="tc-ret"><strong>2.5%</strong>/ jour</div>
        <div class="tc-arr"><svg width="15" height="15" fill="none" stroke="#fff" stroke-width="2.5" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></div>
      </div>
    </a>

    <a class="type-card tc-actif" href="actif.html">
      <div class="tc-shine"></div>
      <div class="tc-top">
        <div class="tc-ico"><svg width="19" height="19" fill="none" stroke="#fff" stroke-width="2.5" viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8m-4-4v4"/></svg></div>
        <div class="tc-badge">üî• En cours</div>
      </div>
      <div class="tc-title">Actif</div>
      <div class="tc-desc">Suivez et g√©rez vos positions actives en temps r√©el.</div>
      <div class="tc-footer">
        <div class="tc-ret"><strong id="tc-n">0</strong> plan(s)</div>
        <div class="tc-arr"><svg width="15" height="15" fill="none" stroke="#fff" stroke-width="2.5" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></div>
      </div>
    </a>
  </div>

  <!-- TOP INVESTORS -->
  <div class="sec-head">
    <div class="sec-title">üèÜ Top Investisseurs</div>
    <a href="classement.html" class="sec-more">Voir tout ‚Üí</a>
  </div>
  <div class="inv-scroll" id="inv-list"></div>

  <div style="height:14px"></div>
</div>

<!-- BOTTOM NAV -->
<nav class="bot-nav">
  <button class="bn active" onclick="location.href='dashboard.html'">
    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
    <span class="bn-lbl">Accueil</span><div class="bn-dot"></div>
  </button>
  <button class="bn" onclick="location.href='plan.html'">
    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
    <span class="bn-lbl">Investir</span><div class="bn-dot"></div>
  </button>
  <button class="bn" onclick="location.href='actif.html'">
    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M2 8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8z"/><path d="M16 12h.01"/></svg>
    <span class="bn-lbl">Portefeuille</span><div class="bn-dot"></div>
  </button>
  <button class="bn" onclick="location.href='profil.html'">
    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
    <span class="bn-lbl">Profil</span><div class="bn-dot"></div>
  </button>
</nav>

<div id="toast" class="toast"><span id="t-msg"></span></div>

<script>
const{createClient}=supabase;
const sb=createClient('https://fqiotqrraobmsrcyewsi.supabase.co','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxaW90cXJyYW9ibXNyY3lld3NpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4MjA3NzUsImV4cCI6MjA4NzM5Njc3NX0.pmvaQikEDEj705o7kBBWwkLwAoZ62D-GoxjFm5HEHNc');
let user=null,profile=null;

async function init(){
  const{data:{session}}=await sb.auth.getSession();
  if(!session){window.location.href='index.html';return;}
  user=session.user;
  startClock();
  await Promise.all([loadProfile(),loadStats(),loadTopInvestors()]);
}

function startClock(){
  const t=()=>{
    const n=new Date();
    document.getElementById('gc-clock').textContent=n.toLocaleTimeString('fr-FR',{hour:'2-digit',minute:'2-digit'});
    document.getElementById('gc-date').textContent=n.toLocaleDateString('fr-FR',{weekday:'long',day:'numeric',month:'long'});
  };
  t();setInterval(t,1000);
}

async function loadProfile(){
  const{data}=await sb.from('profiles').select('*').eq('id',user.id).single();
  profile=data;
  // Afficher le nom, jamais l'email
  const full=data?.full_name||'';
  const first=full.trim().split(' ')[0]||'Investisseur';
  document.getElementById('gc-name').innerHTML=`Bienvenue <span>${first}</span> !`;
  document.getElementById('gc-av').textContent=first.charAt(0).toUpperCase();
  document.getElementById('sb-av').textContent=first.charAt(0).toUpperCase();
  document.getElementById('sb-name').textContent=full||'Utilisateur';
  document.getElementById('sb-rank').textContent='‚≠ê '+(data?.rank||'Bronze');
  document.getElementById('gc-balance').innerHTML=fmt(data?.balance||0)+' <small>FCFA</small>';
  document.getElementById('gc-gains').textContent='+'+fmt(data?.total_gains||0)+' FCFA';
  document.getElementById('card-balance').textContent=fmt(data?.balance||0);
  document.getElementById('card-gains').textContent=fmt(data?.total_gains||0);
}

async function loadStats(){
  const{count}=await sb.from('investments').select('*',{count:'exact',head:true}).eq('user_id',user.id).eq('status','active');
  const n=count||0;
  document.getElementById('card-plans').textContent=n;
  document.getElementById('tc-n').textContent=n;
}

async function loadTopInvestors(){
  const{data}=await sb.from('top_investors').select('*').order('rank_position').limit(6);
  const el=document.getElementById('inv-list');
  if(!data?.length){el.innerHTML='<p style="color:var(--ink3);font-size:13px;padding:10px">Aucune donn√©e</p>';return;}
  const avs=['av1','av2','av3','avn','avn','avn'];
  el.innerHTML=data.map((inv,i)=>`
    <div class="inv-card" onclick="location.href='classement.html'">
      <div class="inv-av ${avs[i]||'avn'}">${(inv.display_name||'?').charAt(0)}</div>
      <div class="inv-name">${inv.display_name||'Anonyme'}</div>
      <div class="inv-gain">+${fmt(inv.total_gains)} FCFA</div>
      <div class="inv-rnk">#${inv.rank_position||i+1} ¬∑ ${inv.badge}</div>
    </div>`).join('');
}

function fmt(n){return(n||0).toLocaleString('fr-FR')}
function toggleSB(){const s=document.getElementById('sidebar'),o=document.getElementById('sb-overlay'),b=document.getElementById('burger');s.classList.toggle('open');o.classList.toggle('open');b.classList.toggle('open')}
function closeSB(){document.getElementById('sidebar').classList.remove('open');document.getElementById('sb-overlay').classList.remove('open');document.getElementById('burger').classList.remove('open')}
async function handleLogout(){await sb.auth.signOut();window.location.href='index.html'}
let tTimer;
function toast(msg,type='success'){clearTimeout(tTimer);const t=document.getElementById('toast');document.getElementById('t-msg').textContent=msg;t.className=`toast ${type} show`;tTimer=setTimeout(()=>t.classList.remove('show'),4000)}
init();
</script>
</body>
</html>
